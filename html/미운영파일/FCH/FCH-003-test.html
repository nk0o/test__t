<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>건강설문</title>
  <link rel="stylesheet" href="../../resources/css/guide.css">
  <link rel="stylesheet" href="../../resources/css/jquery-ui.css">
  <link rel="stylesheet" href="../../resources/css/swiper.min.css">
  <script src="../../resources/js/jquery-3.6.0.min.js"></script>
  <script src="../../resources/js/ui.common.js"></script>
  <script src="../../resources/js/jquery-ui.js"></script>
  <script src="../../resources/js/jquery-touch-punch.js"></script>
  <script src="../../resources/js/swiper.min.js"></script>
  <style>
      .swiper-container .swiper-paginations{z-index: 111;position: fixed;top: 99px;left: 0;width: 100%;height: 38px;background-color: #fff;}
      .swiper-container .pagination_progressbar {position: relative;transform-origin: top left;transform: rotate(-90deg);width: 12px;height: 100vw;}
      .swiper-container .pagination_fraction{position: relative;top: 0px;right: auto;bottom: auto;left: auto;width: auto;margin-bottom: 12px;padding-right: 24px;text-align: right;background-color: transparent;}
      .swiper-container .swiper-slide{align-items: flex-start;}
      .survey_pop .inner .pop_wrap .pop_container .pop_con{height: 100%;}
      .survey_pop .survey_Swiper .survey_con .s_con{padding-top: 45px;}
  </style>
</head>
<body class="type_content">
  <div class="health_wrap">
    <div class="health_container">
    
    </div>
    <!--// health_container -->
  </div>
 
  <!-- popup -->
  <div class="health_full survey_pop actived" id="full001" style="display: block;">
    <div class="inner">
      <div class="pop_wrap">
        <div class="pop_header">
          <div class="header_wrap">
            <!-- <h1>건강설문</h1> -->
            <button type="button" class="btn_close ui-close"><span class="hidden">닫기</span></button>
          </div>
        </div>
        <!-- //pop header -->

        <div class="pop_container">
          <div class="con_inner">
            <div class="con_box">
              <div class="pop_con">
                <!-- 팝업 내용 -->
                <!-- Swiper -->
                  <div class="swiper-container survey_Swiper">
                    <div class="swiper-wrapper">
                     <!-- slider01 -->
                      <div class="swiper-slide qlist" id="thisOn">
                        <div class="survey_con">
                          <div class="s_con">
                            <p class="tit">
                              일주일에 몇 시간<br>운동하세요?
                            </p>
                            <p class="sub mt15">* 숨이 차기 시작한 횟수를<br>입력해주세요</p>
                            <div class="bg_box">
                              <img src="../../resources/img/@survey_bg03.png"/>
                            </div>
                          </div>
                          <!-- bottom -->
                          <div class="bottom_box b1">
                            <div class="btn_wrap">
                              <div class="survey_chk">
                                <div class="i_survey_wrap">
                                  <input type="number" class="input_srvey" placeholder="숫자를 입력하세요.">
                                </div>
                              </div>
                              <button type="button" class="btn_pop_black2 nextBtn">다음</button>
                            </div>
                          </div>
                          <!-- //bottom-->
                        </div>
                      </div>
                      <!-- //slider01 -->
                      <!-- slider02 -->
                      <div class="swiper-slide">
                        <div class="survey_con">
                          <div class="s_con">
                            <p class="tit mt20">
                              WHO에서는 일주일에<br>최소 2.5~5시간 정도<br>중간 강도의 운동을<br>권장합니다.
                            </p>
                            <p class="tit mt20">
                              이 범위에서<br>상위에 해당하시네요.
                            </p>
                            <p class="tit mt20">
                              훌륭해요!
                            </p>
                          </div>
                        </div>
                      </div>
                      <!-- //slider02 -->
                      <!-- slider03 -->
                      <div class="swiper-slide">
                        <div class="survey_con">
                          <div class="s_con">
                            <p class="tit mt20">
                              운동이 부족해요.
                            </p>
                            <p class="tit mt20">
                              WHO에서는 일주일에<br>최소 2.5~5시간 정도<br>중간 강도의 운동을<br>권장합니다.
                            </p>
                            <p class="tit mt20">
                              지금 바로 시작할 필요는<br>없지만, 일주일에<br>몇분 2~3회만 운동해도<br>변화를 느낄 수 있을 거예요. </p>
                          </div>
                        </div>
                      </div>
                      <!-- //slider03 -->
                      <!-- slider04 -->
                      <div class="swiper-slide qlist">
                        <div class="survey_con">
                          <div class="s_con">
                            <p class="tit">
                              이제 식단에 대한<br>7가지 질문이 있습니다.<br>시작하기 전에,<br>선호하는 식이요법이<br>있으신가요?</p>
                              <div class="bg_box">
                                <img src="../../resources/img/@survey_bg04.png"/>
                              </div>
                          </div>
                          <!-- bottom -->
                          <div class="bottom_box b4">
                            <!-- <div class="bg_box">
                              <img src="../../resources/img/@survey_bg04.png"/>
                            </div> -->
                            <div class="btn_wrap">
                              <div class="survey_chk">
                                <div class="i_wrap">
                                  <input type="radio" id="food01" name="yn03" class="yn"><label for="food01" class="btn_yn"><span>채식주의자
                                    <em>식물 기반 식품 뿐만 아니라 살아
                                    있는 동물에서 파생된 식품도 먹음</em></span></label>
                                </div>
                                <div class="i_wrap">
                                  <input type="radio" id="food02" name="yn03" class="yn"><label for="food02" class="btn_yn"><span>극단적 채식주의자</span></label>
                                </div>
                                <div class="i_wrap">
                                  <input type="radio" id="food03" name="yn03" class="yn"><label for="food03" class="btn_yn"><span>생선허용 채식주의자</span></label>
                                </div>
                                <div class="i_wrap">
                                  <input type="radio" id="food04" name="yn03" class="yn"><label for="food04" class="btn_yn"><span>해당 사항 없음</span></label>
                                </div>
                              </div>
                              <button type="button" class="btn_pop_black2 nextBtn">다음</button>
                            </div>
                          </div>
                          <!-- // bottom-->
                        </div>
                      </div>
                      <!-- //slider04 -->
                      <!-- slider05 -->
                      <div class="swiper-slide">
                        <div class="survey_con">
                          <div class="s_con">
                            <p class="tit mt20">
                              훌륭해요.
                            </p>
                            <p class="tit mt20">
                              알려줘서<br>고맙습니다!</p>
                          </div>
                        </div>
                      </div>
                      <!-- //slider05 -->
                      <!-- slider06 -->
                      <div class="swiper-slide">
                        <div class="survey_con">
                          <div class="s_con">
                            <p class="tit mt20">
                              이 질문에 답하실 때,<br>지난 몇 주간의<br>식습관에 대해<br>생각해 보세요.
                            </p>
                          </div>
                        </div>
                      </div>
                      <!-- //slider06 -->
                      <!-- slider07 -->
                      <div class="swiper-slide qlist">
                        <div class="survey_con">
                          <div class="s_con">
                            <p class="tit">
                              하루에 과일을<br>2인분 이상 드시나요?</p>
                            <p class="sub mt15">* 1인분 = 2,600 kcal</p>
                            <div class="bg_box">
                              <img src="../../resources/img/@survey_bg05.png"/>
                            </div>
                          </div>
                          <!-- bottom -->
                          <div class="bottom_box b7">
                            <!-- <div class="bg_box">
                              <img src="../../resources/img/@survey_bg05.png"/>
                            </div> -->
                            <div class="btn_wrap">
                              <div class="survey_chk">
                                <div class="i_wrap">
                                  <input type="radio" id="food05" name="yn04" class="yn"><label for="food05" class="btn_yn"><span>항상</span></label>
                                </div>
                                <div class="i_wrap">
                                  <input type="radio" id="food06" name="yn04" class="yn"><label for="food06" class="btn_yn"><span>종종</span></label>
                                </div>
                                <div class="i_wrap">
                                  <input type="radio" id="food07" name="yn04" class="yn"><label for="food07" class="btn_yn"><span>때때로</span></label>
                                </div>
                                <div class="i_wrap">
                                  <input type="radio" id="food08" name="yn04" class="yn"><label for="food08" class="btn_yn"><span>거의 안 함</span></label>
                                </div>
                                <div class="i_wrap">
                                  <input type="radio" id="food09" name="yn04" class="yn"><label for="food09" class="btn_yn"><span>전혀 안 함</span></label>
                                </div>
                              </div>
                              <button type="button" class="btn_pop_black2 nextBtn">다음</button>
                            </div>
                          </div>
                          <!-- //bottom-->
                        </div>
                      </div>
                      <!-- //slider07 -->
                    </div><!-- swiper-wrapper -->
                     <div class="swiper-paginations">
                        <div class="swiper-pagination pagination_fraction"></div>
                        <div class="swiper-pagination pagination_progressbar"></div>
                     </div>
                  </div>
                <!-- //swiper-container -->
                <!-- //팝업내용 -->
              </div>
            </div>
          </div>
        </div>
        <!-- //pop container -->
        <!-- <div class="btn_wrap">
          <button type="button" class="btn_pop_black2">다음</button>
        </div>  -->
        <!-- // pop btn -->
      </div>
    </div>
  </div>
  
  
  <!-- // -->
  <script>
    $(document).ready(function(){
        //화면 높이값 관련
        var ph = (window.innerHeight - 99) + 'px'; //20210913
        var bch = $('.s_con + .btn_wrap').outerHeight();
        $('.survey_pop .pop_container').css({'height' : ph});
        $('.survey_con').css({'height' : ph});
        $('.s_con').css({'height' : ph});


        //슬라이더 타입
        var pageType1 = function(n) {
          setTimeout(function(){
            surveySlider.slideTo(n) 
          },1000); //20230106 속도수정 /20210903 슬라이더 재생 속도
        };
        
        //전체 슬라이더 
        var surveySlider = new Swiper(".survey_Swiper", {
          direction: 'vertical',
          allowTouchMove: false,
          effect:'slide',
          navigation: {
            nextEl : '.nextBtn',
            hideOnClick : true
          },
          pagination: {
            el: '.pagination_progressbar',
            type: 'progressbar',
            clickable: false,
         },
          on :{
            init: function () {              
              pageType1(0);
              slideBottomUp(this)
            },
            slideChange: function () {
              //텍스트만 있는 경우
              var num = 0;
              var idxArray = [1,2,4,5];
              for(key in idxArray){
                if(surveySlider.realIndex === idxArray[key]) {
                  num = surveySlider.realIndex + 1;
                  pageType1(num);
                }       
              }
            },
            activeIndexChange: function(){
              // 하단 인풋 올라오는 경우
              $('.swiper-slide').removeAttr('id', 'thisOn');
              $('.swiper-slide').eq(this.realIndex).attr('id', 'thisOn');
              slideBottomUp(this)
            }          
          }
        });

       function slideBottomUp(el){
          var bh = $('#thisOn > .survey_con > .bottom_box').innerHeight();
          console.log($('.btn_wrap').innerHeight())
          $(".bottom_box").css('bottom', - bh);
        
          if(el.realIndex === 0, 3, 6) {
            var sIndex = el.realIndex;
            var bName = $('.b'+ (sIndex + 1));
            setTimeout(function(){
              bName.css({
                "bottom":"0",
                "transition":"all 0.5s cubic-bezier(0.22, 0.61, 0.36, 1) 0s"
              });
            },1000); 
          }
       }
        //ui bar
        //페이징
        var total = $('.qlist').length;
        $('.total').html(total);

        $(function() {
          $( ".bar01" ).slider({
            range: "max",
            min: 1,
            max: 5,
            value: 3
          });
        });
        $(function() {
          $( ".bar02" ).slider({
            range: "max",
            min: 1,
            max: 5,
            value: 3
          });
        });

        //progress Bar
        var pagingSwiper = new Swiper('.survey_Swiper', {
            direction: 'vertical',
            allowTouchMove: false,
            pagination: {   //페이징 사용자 설정
              el: ".pagination_fraction",   //페이징 태그 클래스 설정 
              type : 'fraction',
            /*   renderFraction: function (currentClass, totalClass) {
                  return '<span class="' + currentClass + '"></span>' +
                        ' - ' +
                        '<span class="' + totalClass + '"></span>';
              } */
            }
        });
        
        //Main Swiper로 Fraction제어
        surveySlider.controller.control = pagingSwiper;
    });
  </script>
</body>
</html>