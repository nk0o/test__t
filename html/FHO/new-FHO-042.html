<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>수면 관리</title>
<script src="../../resources/js/jquery-3.6.0.min.js"></script>
<script src="../../resources/js/swiper.min.js"></script>
<script src="../../resources/js/chart.min.js"></script>   <!--20220719 chart.js-->
<script src="../../resources/js/chartjs-plugin-datalables@2.0.0.js"></script><!-- 20220801 chartjs데이터라벨플러그인추가 -->
<script src="../../resources/js/ui.common.js"></script>
<link rel="stylesheet" href="../../resources/css/guide.css">
<link rel="stylesheet" href="../../resources/css/swiper.min.css">
</head>
<body>
  <div class="health_wrap type_main_i type_home">
    <header class="health_header">
      <div class="user_point">
        <span>1,000</span>
      </div>
      <div class="hd_noti">알림</div>
    </header>
    <div class="health_container align_right">
      <div class="swiper-container sect_cate">
        <ul class="swiper-wrapper">
          <li class="swiper-slide">
            <a href="#n" class="nav sleep on">
              <p class="ico"></p>
              <span>수면 관리</span>
            </a>
          </li>
          <li class="swiper-slide">
            <a href="#n" class="nav walk">
              <p class="ico"></p>
              <span>건강 걸음</span>
            </a>
          </li>
          <li class="swiper-slide">
            <a href="#n" class="nav ai">
              <p class="ico"></p>
              <span>AI 건강카메라</span>
            </a>
          </li>
          <li class="swiper-slide">
            <a href="#n" class="nav bmi">
              <p class="ico"></p>
              <span>BMI</span>
            </a>
          </li>
          <li class="swiper-slide">
            <a href="#n" class="nav mbti">
              <p class="ico"></p>
              <span>Dental MBTI</span>
            </a>
          </li>
        </ul>
        <div class="cate_next"></div>
        <div class="cate_prev"></div>
      </div>
      <!-- //.sect_cate -->
      <div class="stress_level sleep_time">
        <div class="hc_head">
          <h3 class="stt">
            Daily 수면 시간<a href="#n" class="link" onclick="netiveUI.plugins.popAlert('#alert01');"></a>
            <span>최근 업데이트 2023.08.09 11:03</span>
          </h3>
          <a href="javascript:location.href='/fmy/FMY-130001.do'" class="btn_more_txt"><span>더보기</span></a>
        </div>
        <div class="inner os_setting">
          <p class="desc">수면 데이터를 사용하려면 삼성 헬스 설정 > 애플리케이션 > Tune H > 모든 권한 허용을 선택해야 삼성 헬스 데이터에 접근 이용할 수 있습니다.
          </p>
          <button type="button" class="btn_base_03">앱 설정으로 이동</button>
        </div>
      </div><!-- //.sleep_time -->
      <div class="health_cam_wrap">
        <div class="hc_head">
          <h3 class="stt">
            수면 히스토리<a href="#n" class="link" onclick="netiveUI.plugins.popAlert('#alert02');"></a>
          </h3>
        </div>
        <!-- //.hc_head -->
        <div class="tab_wrap">
          <div class="tabs dep1">
            <ul class="tab_menulist">
              <li class="active"><a class="tab_control" href="#tab-1">일간</a></li>
              <li><a class="tab_control" href="#tab-2">주간</a></li>
              <li><a class="tab_control" href="#tab-3">월간</a></li>
            </ul>
            <!-- 일간 tab 내용 -->
            <div class="tab_panel active" id="tab-1">
              <div class="my_bmi_body bg_gray">
                <!-- 20230821 수정: data_range을 bg_gray안으로 이동 -->
                <div class="date_range"> 
                  <button type="button" class="btn_cht left"></button>
                  <span>5월 25일 ~ 5월 31일</span>
                  <button type="button" class="btn_cht right"></button>
                </div>
                <!--// 20230821 수정: data_range을 bg_gray안으로 이동 -->
                <div class="my_bmi_chart">
                  <div class="summary">
                    <p class="group01">본인</p>
                    <p class="group02">Tune H 이용자 평균</p>
                  </div>
                  <figure>
                    <canvas id="myRunWeek" style="width:100%; height:250px;"></canvas>
                  </figure>
                </div>
              </div>
              <!-- //.my_bmi_body.bg_gray -->
            </div>
            <!-- //일간 tab 내용 -->
            <!-- 주간 tab 내용 -->
            <div class="tab_panel" id="tab-2">
              <div class="my_bmi_body bg_gray">
                <!-- 20230821 수정: data_range을 bg_gray안으로 이동 -->
                <div class="date_range"> 
                  <button type="button" class="btn_cht left"></button>
                  <span>5월 25일 ~ 5월 31일</span>
                  <button type="button" class="btn_cht right"></button>
                </div>
                <!--// 20230821 수정: data_range을 bg_gray안으로 이동 -->
                <div class="my_bmi_chart">
                  <div class="summary">
                    <p class="group01">본인</p>
                    <p class="group02">Tune H 이용자 평균</p>
                  </div>
                  <figure>
                    <canvas id="myRunWeek" style="width:100%; height:250px;"></canvas>
                  </figure>
                </div>
              </div>
              <!-- //.my_bmi_body.bg_gray -->
            </div>
            <!-- //주간 tab 내용 -->
            <!-- 월간 tab 내용 -->
            <div class="tab_panel" id="tab-3">
              <div class="my_bmi_body bg_gray">
                <!-- 20230821 수정: data_range을 bg_gray안으로 이동 -->
                <div class="date_range"> 
                  <button type="button" class="btn_cht left"></button>
                  <span>5월 25일 ~ 5월 31일</span>
                  <button type="button" class="btn_cht right"></button>
                </div>
                <!--// 20230821 수정: data_range을 bg_gray안으로 이동 -->
                <div class="my_bmi_chart">
                  <div class="summary">
                    <p class="group01">본인</p>
                    <p class="group02">Tune H 이용자 평균</p>
                  </div>
                  <figure>
                    <canvas id="myRunWeek" style="width:100%; height:250px;"></canvas>
                  </figure>
                </div>
              </div>
              <!-- //.my_bmi_body.bg_gray -->
            </div>
            <!-- //월간 tab 내용 -->
          </div>
          <!-- //.tabs.dep1 -->
        </div><!-- //.tab_wrap -->
        <div class="svc_desc acco_list_wrap">
          <div class="item_head">
            <p>수면 관리 서비스 자세히 보기</p>
            <button type="button" class="btn_acco_more"><span class="hidden">열기</span></button>
          </div>
          <ul class="item_cont" style="display: none;">
            <li>활동 거리 : 걸음수 X 보폭 = 총 이동거리 (예상) (보폭 = 성인 남성 기준 약 70cm, 여성 약 60cm)
            </li>
            <li>활동 시간 : 이동 거리 / 걷는 속도 = 걸은 시간 (걷는 보통 속도 : 시속 4 ~ 6 km/h)
            </li>
            <li>소비칼로리 : 체중(kg) X 0.57 X 이동거리(m)/1,000
            </li>
            <li>걸음수 측정 기능을 제공하는 단말기에서만 건강 걸음을 이용하실 수 있습니다.
            </li>
            <li>단말기, 운영체제, 기타 주변기기(워치 등)에 따라 걸음수 반영의 차이가 발생할 수 있습니다.
            </li>
            <li>걸음수 데이터 측정 및 계산 방식에 따라 결과가 다른 앱과 차이가 있을 수 있습니다.
            </li>
          </ul>
        </div>
      </div>
      <!-- //.health_cam_wrap -->
      <div class="main_footer acco_list_wrap">
        <div class="item_head">
          <a id="popFull01" href="#"><span>이용약관</span></a>
          <a id="popFull04" href="#"><span class="footer_tit">위치기반 서비스 이용 약관</span></a>
          <a id="popFull02" href="#"><span class="footer_tit">개인정보처리방침</span></a>
          <br>
          <a id="popFull03" href="#"><span class="footer_tit">이전 개인정보처리방침</span></a>
          <button type="button" class="btn_acco_more"><span class="hidden">열기</span></button>
        </div>
        <div class="item_cont" style="display: none;">
          <div>
              <p>
                <span>라이나생명보험 주식회사</span>
                <span class="cigna_president">대표이사 :  조지은</span>
              </p>
              <p class="address">서울 종로구 삼봉로 48 라이나타워</p>
              <p><span>사업자등록번호 : </span>104-81-85673</p>
              <p><span>통신판매업신고 </span>제2022-서울종로-0938호</p>
              <p><a class="arrow_link" href="#">사업자정보확인</a></p>
          </div>
          <div class="footer_call_center">
            <p><span>고객센터 : 전화번호 </span><a href="tel:1833-4030">1833-4030</a></p>
            <p><span>이메일 : </span><a class="arrow_link" href="#">문의하기</a></p>
            <p class="copy">ⓒLINA Life Insurance Co., Ltd. All rights reserved.</p>
          </div>
        </div>
      </div>
    </div>
    <!-- //.health_container -->
    <footer class="health_footer">
      <div class="health_footer_nav">
        <ul>
          <li>
            <a href="#n" class="nav_item home">
              <span class="icon"></span>
              <strong>홈</strong>
            </a>
          </li>
          <li>
            <a href="#n" class="nav_item diary on">
              <span class="icon"></span>
              <strong>웰니스</strong><!-- 20230911 문구수정 -->
            </a>
          </li>
          <!-- 20230911 미션 메뉴 추가 -->
          <li>
            <a href="#" class="nav_item mission">
              <span class="icon"></span>
              <strong>미션</strong>
            </a>
          </li>
          <!-- //20230911 미션 메뉴 추가 -->
          <li>
            <a href="#n" class="nav_item health">
              <span class="icon"></span>
              <strong>콘텐츠</strong><!-- 20230911 문구수정 -->
            </a>
          </li>
          <li>
            <a href="#n" class="nav_item mypage">
              <span class="icon"></span>
              <strong>MY</strong><!-- 20230911 문구수정 -->
            </a>
          </li>
        </ul>
      </div>
    </footer>
  </div>
  <!-- Daily 수면 시간이란 모달팝업-->
  <div class="health_alert" id="alert01" style="display: none;">
    <div class="inner">
      <h2 class="pop_tit">
        Daily 수면 시간이란?<button type="button" class="btn_close ui-close"><span class="hidden">닫기</span></button>
      </h2>
      <p class="msg">
        매일 하루동안 활동한 걸음수를 기록하여, 활동거리, 활동시간, 소비칼로리를 계산합니다.<br><br>
        매일 건강 관리에 도움이 될 수 있도록 해당 데이터를 제공합니다.
      </p>
    </div>
  </div>
  <!-- 수면 히스토리란 모달팝업-->
  <div class="health_alert" id="alert02" style="display: none;">
    <div class="inner">
      <h2 class="pop_tit">
        수면 히스토리란?<button type="button" class="btn_close ui-close"><span class="hidden">닫기</span></button>
      </h2>
      <p class="msg">
        사용자 휴대폰 기기의 걸음수를 기반으로 매일 기록된 걸음수를 주간, 월간, 연간 기준으로 걸음 히스토리, 합계 조회가 가능합니다.
      </p>
    </div>
  </div>

<!-- 상단 카테고리 슬라이드 -->
<script>
  $(document).ready(function () {
    var cateSwiper = new Swiper(".sect_cate", {
      slidesPerView: 3,
      navigation: {
        nextEl: ".cate_next",
        prevEl: ".cate_prev",
        disabledClass: "disabled"
      },
    });
  });
</script>

<!-- 주간 차트 -->
<script>
  var ctx = document.getElementById("myRunWeek").getContext("2d");
  var bgGradient = ctx.createLinearGradient(0, 0, 0, 170);
  bgGradient.addColorStop(0, 'rgb(184,255,255)');
  bgGradient.addColorStop(1, 'rgb(213,205,233)');
  
  var bgGradient2 = ctx.createLinearGradient(0, 0, 0, 170);
  bgGradient2.addColorStop(0, 'rgb(0,149,255)');
  bgGradient2.addColorStop(1, 'rgb(155,120,240)');

  var myRunWeek = new Chart(ctx, {
    type: 'line',
    plugins:[ChartDataLabels],
    data: {
      labels: ['일', '월', '화', '수', '목', '금', '토'],
      datasets: [{
        data: [3800, 2250, 3000, 7500, 8100, 2800, 5400],
        borderWidth: 2, //라인 두께
        backgroundColor: '#f8ab7c',
      }, {
        data: [4000, 2400, 3300, 7900, 6100, 8000, 7400],
        scales: false,
        pointLabelFontSize : 40,
        type: 'bar',
        barThickness: 12, //막대 최소가로값
        borderRadius: 6, //막대 둥글기
        backgroundColor: [
          bgGradient, bgGradient, bgGradient, bgGradient, bgGradient, bgGradient2, bgGradient
        ],
      }]
    },
    options: {
      plugins: {
        datalabels:{
          align: function(context) {
            var index = context.dataIndex;
            var value = context.dataset.data[index];
            var invert = Math.abs(value) <= 1;
            return value < 1 ? 'end' : 'start'
          },
          color: '#222',
          labels: {
            title: {
              font: {
                size: 12,
                weight: 400
              },
            },
          },
          anchor: 'end',
          offset: -20,
          formatter:function(value,context){
            var idx = context.dataIndex;
            return context.chart.data[idx];
          }
        },
        legend: {
          display: false,
        },
        tooltip: { //막대 상태값
          enabled: false,
        },
      },
      scales: {
        x: { //xc축
          offset: true,
          ticks: {
            font: {
              size: 13
            },
            color: '#222',
          },
          grid: {
            display: false,
            offset: false
          },
        }, 
        y: { //y축
          min: 0, //최소값
          max: 10000, //최대값
          position: 'left',
          ticks: {
            autoSkip: false,
            stepSize: 2500, //data 숫자 간격
            font: {
              size: 12
            },
            color: '#999',
          },
          grid: {
            display: true,
            offset: false
          },
        }
      },
    },
  });
</script>

<!-- 월간 차트 -->
<script>
  var ctx = document.getElementById("myRunMonth").getContext("2d");
  var bgGradient = ctx.createLinearGradient(0, 0, 0, 170);
  bgGradient.addColorStop(0, 'rgb(174,210,208)');
  bgGradient.addColorStop(1, 'rgb(228,205,233)');
  
  var bgGradient2 = ctx.createLinearGradient(0, 0, 0, 170);
  bgGradient2.addColorStop(0, 'rgb(25,211,197)');
  bgGradient2.addColorStop(1, 'rgb(203,139,218)');

  var myRunMonth = new Chart(ctx, {
    type: 'bar',
    plugins:[ChartDataLabels],
    data: {
      labels: ['', ''],
      datasets: [{
        data: [6000, 9500],
        barPercentage: 1,
        barThickness: 24, //막대 최소가로값
        borderRadius: 12, //막대 둥글기
        backgroundColor: [
        '#e9d0c1', bgGradient2
        ]
      }]
    },
    options: {
      plugins: {
        datalabels:{
          align: function(context) {
            var index = context.dataIndex;
            var value = context.dataset.data[index];
            var invert = Math.abs(value) <= 1;
            return value < 1 ? 'end' : 'start'
          },
          color: '#222',
          labels: {
            title: {
              font: {
                size: 12,
                weight: 400
              },
            },
          },
          anchor: 'end',
          offset: -20,
          formatter:function(value,context){
            var idx = context.dataIndex;
            return context.chart.data[idx];
          }
        },
        legend: {
          display: false,
        },
        tooltip: { //막대 상태값
          enabled: false,
        },
      },
      scales: {
        x: { //xc축
          offset: true,
          ticks: {
            font: {
              size: 13
            },
            color: '#222',
          },
          grid: {
            display: false,
            offset: false
          },
          title: {
            display: true,
            text: '월간 일 평균 걸음 수',
            font: {
              size: 13
            },
            color: '#222',
            align: 'center',
          }
        },
        y: { //y축
          min: 0, //최소값
          max: 10000, //최대값
          position: 'left',
          ticks: {
            autoSkip: false,
            stepSize: 2500, //data 숫자 간격
            font: {
              size: 12
            },
            color: '#999',
          },
          grid: {
            display: true,
            offset: false
          },
        }
      },
    },
  });
</script>

<!-- 연간 차트 -->
<script>
  var ctx = document.getElementById("myRunYear").getContext("2d");
  var bgGradient = ctx.createLinearGradient(0, 0, 0, 170);
  bgGradient.addColorStop(0, 'rgb(174,210,208)');
  bgGradient.addColorStop(1, 'rgb(228,205,233)');
  
  var bgGradient2 = ctx.createLinearGradient(0, 0, 0, 170);
  bgGradient2.addColorStop(0, 'rgb(25,211,197)');
  bgGradient2.addColorStop(1, 'rgb(203,139,218)');

  var myRunYear = new Chart(ctx, {
    type: 'bar',
    plugins:[ChartDataLabels],
    data: {
      labels: ['', ''],
      datasets: [{
        data: [6000, 9500],
        barPercentage: 1,
        barThickness: 24, //막대 최소가로값
        borderRadius: 12, //막대 둥글기
        backgroundColor: [
        '#e9d0c1', bgGradient2
        ]
      }]
    },
    options: {
      plugins: {
        datalabels:{
          align: function(context) {
            var index = context.dataIndex;
            var value = context.dataset.data[index];
            var invert = Math.abs(value) <= 1;
            return value < 1 ? 'end' : 'start'
          },
          color: '#222',
          labels: {
            title: {
              font: {
                size: 12,
                weight: 400
              },
            },
          },
          anchor: 'end',
          offset: -20,
          formatter:function(value,context){
            var idx = context.dataIndex;
            return context.chart.data[idx];
          }
        },
        legend: {
          display: false,
        },
        tooltip: { //막대 상태값
          enabled: false,
        },
      },
      scales: {
        x: { //xc축
          offset: true,
          ticks: {
            font: {
              size: 13
            },
            color: '#222',
          },
          grid: {
            display: false,
            offset: false
          },
          title: {
            display: true,
            text: '연간 일 평균 걸음 수',
            font: {
              size: 13
            },
            color: '#222',
            align: 'center',
          }
        },
        y: { //y축
          min: 0, //최소값
          max: 10000, //최대값
          position: 'left',
          ticks: {
            autoSkip: false,
            stepSize: 2500, //data 숫자 간격
            font: {
              size: 12
            },
            color: '#999',
          },
          grid: {
            display: true,
            offset: false
          },
        }
      },
    },
  });
</script>
</body>
</html>